<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Registro - Sistema Biblioteca</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <!-- TOPBAR -->
    <header class="topbar">
      <div class="logo">ğŸ“š Sistema de Salas</div>
      <nav class="nav-links">
        <a href="/" class="nav-item">ğŸ  Inicio</a>
        <a href="/participantes" class="nav-item">ğŸ‘¥ Participantes</a>
        <a href="/salas" class="nav-item">ğŸšª Salas</a>
        <a href="/reservas" class="nav-item">ğŸ“… Reservas</a>

        {% if session.usuario %}
          <div class="user-info">
            <span class="user-name">
              ğŸ‘‹ {{ session.usuario.nombre }} {{ session.usuario.apellido }}
            </span>
            <a href="/auth/logout" class="nav-item logout-btn">ğŸšª Cerrar sesiÃ³n</a>
          </div>
        {% else %}
          <a href="/auth/login" class="nav-item login-btn">
            ğŸ” Iniciar sesiÃ³n
          </a>
        {% endif %}
      </nav>
    </header>

    <main class="container">
      <section class="card">
        <div class="card-header">
          <h1>ğŸ“ Crear cuenta</h1>
        </div>

        <!-- Mensajes flash -->
        <div class="messages">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="flash-message {{ category }}">{{ message }}</div>
              {% endfor %}
            {% endif %}
          {% endwith %}
        </div>

        <form method="POST" class="form" action="{{ url_for('auth.registro') }}">
          <div class="form-group">
            <label for="ci">ğŸ†” CÃ©dula</label>
            <input
              type="text"
              id="ci"
              name="ci"
              placeholder="Ej: 4.567.890-1"
              required
            />
          </div>

          <div class="form-group">
            <label for="nombre">ğŸ‘¤ Nombre</label>
            <input
              type="text"
              id="nombre"
              name="nombre"
              placeholder="Tu nombre"
              required
            />
          </div>

          <div class="form-group">
            <label for="apellido">ğŸ‘¥ Apellido</label>
            <input
              type="text"
              id="apellido"
              name="apellido"
              placeholder="Tu apellido"
              required
            />
          </div>

          <div class="form-group">
            <label for="email">ğŸ“§ Email</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="tu.correo@ejemplo.com"
              required
            />
          </div>

          <div class="form-group">
            <label for="password">ğŸ”’ ContraseÃ±a</label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              required
            />
          </div>

          <button type="submit" class="btn primary full-width">
            âœ… Registrarse
          </button>
        </form>

        <div class="card-footer">
          <span class="field-hint">
            Â¿Ya tenÃ©s cuenta?
            <a href="{{ url_for('auth.login') }}">Volver al login</a>
          </span>
        </div>
      </section>
    </main>

    <footer class="footer">
      <span>Proyecto Obligatorio Â· Segundo Semestre 2025</span>
      {% if session.usuario %}
        <span class="user-session">
          SesiÃ³n activa: {{ session.usuario.email }}
        </span>
      {% endif %}
    </footer>
  </body>
</html>
