<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Reservas</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <header class="topbar">
      <div class="logo">ğŸ“š Sistema de Salas</div>
      <nav class="nav-links">
        <a href="/" class="nav-item">ğŸ  Inicio</a>
        <a href="/participantes" class="nav-item">ğŸ‘¥ Participantes</a>
        <a href="/salas" class="nav-item">ğŸšª Salas</a>
        <a href="/reservas" class="nav-item active">ğŸ“… Reservas</a>
      </nav>
    </header>

    <main class="container">
      <section class="card">
        <div class="card-header">
          <h1>ğŸ“… Reservas</h1>
          <div class="card-actions">
            <a
              href="{{ url_for('reservas.crear_reserva') }}"
              class="btn primary"
            >
              â• Nueva reserva
            </a>
          </div>
        </div>

        {% if reservas %}
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Fecha</th>
              <th>Turno</th>
              <th>Sala</th>
              <th>Edificio</th>
              <th>Participantes</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for r in reservas %}
            <tr>
              <td>{{ r.id_reserva }}</td>
              <td>{{ r.fecha }}</td>
              <td>{{ r.id_turno }}</td>
              <td>{{ r.nombre_sala }}</td>
              <td>{{ r.edificio }}</td>
              <td>{{ r.participantes or 'â€”' }}</td>
              <td>
                <span class="estado-pill estado-{{ r.estado|lower }}">
                  {{ r.estado }}
                </span>
              </td>
              <td>
                <form
                  method="POST"
                  action="{{ url_for('reservas.cancelar_reserva', id_reserva=r.id_reserva) }}"
                >
                  <button type="submit" class="btn secondary small">
                    âŒ Cancelar
                  </button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p class="empty-text">
          TodavÃ­a no hay reservas cargadas. ğŸ“­<br />
          UsÃ¡ el botÃ³n <strong>â€œNueva reservaâ€</strong> para crear la primera.
        </p>
        {% endif %}
      </section>
    </main>

    <footer class="footer">
      <span>Proyecto Obligatorio Â· Segundo Semestre 2025</span>
    </footer>
  </body>
</html>
